import{S as Z,i as $,s as x,e as G,b as F,n as H,h as p,J as ee,k as f,r as Y,l as h,m as v,u as M,p as u,D as o,a as T,c as D,K as U,E as V,L as Q,M as te}from"../chunks/index.0e58c74b.js";import{g as se}from"../chunks/navigation.2cfe3a99.js";import{p as ae}from"../chunks/stores.2f18ef1e.js";import{s as X}from"../chunks/supabaseClient.e8e52d2c.js";function re(c){let e,t;return{c(){e=f("h1"),t=Y("You just logged in"),this.h()},l(r){e=h(r,"H1",{class:!0});var a=v(e);t=M(a,"You just logged in"),a.forEach(p),this.h()},h(){u(e,"class","header")},m(r,a){F(r,e,a),o(e,t)},p:H,d(r){r&&p(e)}}}function le(c){let e,t,r,a,s,i,P,I,w,m,d,n,O,L,b,N,R,y,k,E,j,C,q;return{c(){e=f("form"),t=f("div"),r=f("h1"),a=Y("Log in"),s=T(),i=f("p"),P=Y("Log in with your email and password"),I=T(),w=f("div"),m=f("input"),d=T(),n=f("input"),O=T(),L=f("div"),b=f("input"),R=T(),y=f("form"),k=f("div"),E=f("button"),j=Y("Reset password"),this.h()},l(l){e=h(l,"FORM",{class:!0});var _=v(e);t=h(_,"DIV",{class:!0});var g=v(t);r=h(g,"H1",{class:!0});var A=v(r);a=M(A,"Log in"),A.forEach(p),s=D(g),i=h(g,"P",{class:!0});var B=v(i);P=M(B,"Log in with your email and password"),B.forEach(p),I=D(g),w=h(g,"DIV",{});var S=v(w);m=h(S,"INPUT",{class:!0,type:!0,placeholder:!0}),d=D(S),n=h(S,"INPUT",{class:!0,type:!0,placeholder:!0}),S.forEach(p),O=D(g),L=h(g,"DIV",{});var J=v(L);b=h(J,"INPUT",{type:!0,class:!0}),J.forEach(p),g.forEach(p),_.forEach(p),R=D(l),y=h(l,"FORM",{class:!0});var K=v(y);k=h(K,"DIV",{class:!0});var W=v(k);E=h(W,"BUTTON",{class:!0});var z=v(E);j=M(z,"Reset password"),z.forEach(p),W.forEach(p),K.forEach(p),this.h()},h(){u(r,"class","header"),u(i,"class","description"),u(m,"class","inputField"),u(m,"type","email"),u(m,"placeholder","Your email"),u(n,"class","inputField"),u(n,"type","password"),u(n,"placeholder","Your password"),u(b,"type","submit"),u(b,"class","button block"),b.value=N=c[0]?"Loading":"Sign in",b.disabled=c[0],u(t,"class","col-6 form-widget"),u(e,"class","row flex-center flex"),u(E,"class","button block primary"),u(k,"class","col-6 form-widget"),u(y,"class","row flex-center flex")},m(l,_){F(l,e,_),o(e,t),o(t,r),o(r,a),o(t,s),o(t,i),o(i,P),o(t,I),o(t,w),o(w,m),U(m,c[1]),o(w,d),o(w,n),U(n,c[2]),o(t,O),o(t,L),o(L,b),F(l,R,_),F(l,y,_),o(y,k),o(k,E),o(E,j),C||(q=[V(m,"input",c[6]),V(n,"input",c[7]),V(e,"submit",Q(c[4])),V(E,"click",Q(c[5]))],C=!0)},p(l,_){_&2&&m.value!==l[1]&&U(m,l[1]),_&4&&n.value!==l[2]&&U(n,l[2]),_&1&&N!==(N=l[0]?"Loading":"Sign in")&&(b.value=N),_&1&&(b.disabled=l[0])},d(l){l&&p(e),l&&p(R),l&&p(y),C=!1,te(q)}}}function oe(c){let e;function t(s,i){return s[3].data.session?re:le}let r=t(c),a=r(c);return{c(){a.c(),e=G()},l(s){a.l(s),e=G()},m(s,i){a.m(s,i),F(s,e,i)},p(s,[i]){r===(r=t(s))&&a?a.p(s,i):(a.d(1),a=r(s),a&&(a.c(),a.m(e.parentNode,e)))},i:H,o:H,d(s){a.d(s),s&&p(e)}}}function ie(c,e,t){let r;ee(c,ae,d=>t(3,r=d));let a=!1,s,i;const P=async()=>{try{t(0,a=!0);const{data:d,error:n}=await X.auth.signInWithPassword({email:s,password:i});if(n)throw n;se("/",{invalidateAll:!0})}catch(d){d instanceof Error&&alert(d.message)}finally{t(0,a=!1)}};async function I(){try{if(!s)throw new Error("Please enter your email");const{data:d,error:n}=await X.auth.resetPasswordForEmail(s||"",{redirectTo:"/"});if(n)throw n;alert("Check your email for the password reset link!")}catch(d){d instanceof Error&&alert(d.message)}}function w(){s=this.value,t(1,s)}function m(){i=this.value,t(2,i)}return[a,s,i,r,P,I,w,m]}class de extends Z{constructor(e){super(),$(this,e,ie,oe,x,{})}}export{de as default};
