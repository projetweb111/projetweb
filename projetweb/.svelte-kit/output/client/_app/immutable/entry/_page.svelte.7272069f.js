import{S as H,i as N,s as U,k as m,r as R,a as O,l as d,m as v,u as S,h as u,c as $,p as _,b as E,D as p,K as F,E as M,L as Y,n as g,M as q,e as V,N as T,d as P,f as z,g as x,J as B,w as J,v as K,z as L,A as j,B as G,C as Q}from"../chunks/index.0e58c74b.js";import{g as X}from"../chunks/navigation.2cfe3a99.js";import{p as Z}from"../chunks/stores.2f18ef1e.js";import{s as D}from"../chunks/supabaseClient.e8e52d2c.js";function ee(f){let s,e,t,o,n,i,a,l,r,c,h,y,I;return{c(){s=m("form"),e=m("div"),t=m("h1"),o=R("Reset your password"),n=O(),i=m("div"),a=m("input"),l=O(),r=m("div"),c=m("input"),this.h()},l(b){s=d(b,"FORM",{class:!0});var w=v(s);e=d(w,"DIV",{class:!0});var k=v(e);t=d(k,"H1",{class:!0});var W=v(t);o=S(W,"Reset your password"),W.forEach(u),n=$(k),i=d(k,"DIV",{});var A=v(i);a=d(A,"INPUT",{class:!0,type:!0,placeholder:!0}),A.forEach(u),l=$(k),r=d(k,"DIV",{});var C=v(r);c=d(C,"INPUT",{type:!0,class:!0}),C.forEach(u),k.forEach(u),w.forEach(u),this.h()},h(){_(t,"class","header"),_(a,"class","inputField"),_(a,"type","new_password"),_(a,"placeholder","Your new password"),_(c,"type","submit"),_(c,"class","button block"),c.value=h=f[0]?"Saving ...":"Save",c.disabled=f[0],_(e,"class","col-6 form-widget"),_(s,"class","row flex-center flex")},m(b,w){E(b,s,w),p(s,e),p(e,t),p(t,o),p(e,n),p(e,i),p(i,a),F(a,f[1]),p(e,l),p(e,r),p(r,c),y||(I=[M(a,"input",f[3]),M(s,"submit",Y(f[2]))],y=!0)},p(b,[w]){w&2&&F(a,b[1]),w&1&&h!==(h=b[0]?"Saving ...":"Save")&&(c.value=h),w&1&&(c.disabled=b[0])},i:g,o:g,d(b){b&&u(s),y=!1,q(I)}}}function te(f,s,e){let t=!1,o;const n=async()=>{try{e(0,t=!0);const{error:a}=await D.auth.updateUser({password:o});if(a)throw a;try{const{error:l}=await D.auth.signOut();if(l)throw l}catch(l){l instanceof Error&&alert(l.message)}X("/signIn",{invalidateAll:!0})}catch(a){a instanceof Error&&alert(a.message)}finally{e(0,t=!1)}};function i(){o=this.value,e(1,o)}return[t,o,n,i]}class se extends H{constructor(s){super(),N(this,s,te,ee,U,{})}}function re(f){let s,e,t,o=f[1].data.session.user.email+"",n,i;return{c(){s=m("form"),e=m("h1"),t=R("Welcome "),n=R(o),i=R(" !"),this.h()},l(a){s=d(a,"FORM",{class:!0});var l=v(s);e=d(l,"H1",{class:!0});var r=v(e);t=S(r,"Welcome "),n=S(r,o),i=S(r," !"),r.forEach(u),l.forEach(u),this.h()},h(){_(e,"class","header"),_(s,"class","row flex-center flex")},m(a,l){E(a,s,l),p(s,e),p(e,t),p(e,n),p(e,i)},p(a,l){l&2&&o!==(o=a[1].data.session.user.email+"")&&K(n,o)},i:g,o:g,d(a){a&&u(s)}}}function ae(f){let s,e,t,o,n,i,a;return{c(){s=m("form"),e=m("h1"),t=R("Welcome !"),o=O(),n=m("form"),i=m("p"),a=R("Please log in to continue"),this.h()},l(l){s=d(l,"FORM",{class:!0});var r=v(s);e=d(r,"H1",{class:!0});var c=v(e);t=S(c,"Welcome !"),c.forEach(u),r.forEach(u),o=$(l),n=d(l,"FORM",{class:!0});var h=v(n);i=d(h,"P",{class:!0});var y=v(i);a=S(y,"Please log in to continue"),y.forEach(u),h.forEach(u),this.h()},h(){_(e,"class","header"),_(s,"class","row flex-center flex"),_(i,"class","form-widget"),_(n,"class","row flex-center flex")},m(l,r){E(l,s,r),p(s,e),p(e,t),E(l,o,r),E(l,n,r),p(n,i),p(i,a)},p:g,i:g,o:g,d(l){l&&u(s),l&&u(o),l&&u(n)}}}function oe(f){let s,e;return s=new se({}),{c(){L(s.$$.fragment)},l(t){j(s.$$.fragment,t)},m(t,o){G(s,t,o),e=!0},p:g,i(t){e||(x(s.$$.fragment,t),e=!0)},o(t){P(s.$$.fragment,t),e=!1},d(t){Q(s,t)}}}function le(f){let s,e,t,o,n;const i=[oe,ae,re],a=[];function l(r,c){return r[0]?0:r[1].data.session?2:1}return e=l(f),t=a[e]=i[e](f),{c(){s=O(),t.c(),o=V(),this.h()},l(r){T("svelte-1hqmfdg",document.head).forEach(u),s=$(r),t.l(r),o=V(),this.h()},h(){document.title="Home"},m(r,c){E(r,s,c),a[e].m(r,c),E(r,o,c),n=!0},p(r,[c]){let h=e;e=l(r),e===h?a[e].p(r,c):(J(),P(a[h],1,1,()=>{a[h]=null}),z(),t=a[e],t?t.p(r,c):(t=a[e]=i[e](r),t.c()),x(t,1),t.m(o.parentNode,o))},i(r){n||(x(t),n=!0)},o(r){P(t),n=!1},d(r){r&&u(s),a[e].d(r),r&&u(o)}}}function ne(f,s,e){let t;B(f,Z,n=>e(1,t=n));let o=!1;return D.auth.onAuthStateChange((n,i)=>{n=="PASSWORD_RECOVERY"?(console.log("PASSWORD_RECOVERY",i),e(0,o=!0)):e(0,o=!1)}),[o,t]}class pe extends H{constructor(s){super(),N(this,s,ne,le,U,{})}}export{pe as default};
