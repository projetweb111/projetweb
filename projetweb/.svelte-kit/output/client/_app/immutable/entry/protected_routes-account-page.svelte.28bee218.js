import{S as he,i as de,s as ve,k as f,r as w,a as q,l as c,m as u,u as y,h as s,c as L,O as ie,p as n,q as Ee,b,D as t,n as se,J as Me,o as we,v as B}from"../chunks/index.0e58c74b.js";import{p as ye}from"../chunks/stores.2f18ef1e.js";import{s as _e}from"../chunks/supabaseClient.e8e52d2c.js";function be(m){let l,a;return{c(){l=f("p"),a=w("Loading ...")},l(d){l=c(d,"P",{});var O=u(l);a=y(O,"Loading ..."),O.forEach(s)},m(d,O){b(d,l,O),t(l,a)},p:se,d(d){d&&s(l)}}}function Oe(m){let l,a,d,O,E,v,A,G,R,M,_,F,P,N,S,k,r,g,C,D,h,o,p,x,H,I,T,U,j,z,Q,W,J,V,X;return{c(){l=f("form"),a=f("p"),d=f("strong"),O=w("My name : "),E=w(m[0]),v=q(),A=w(m[1]),G=q(),R=f("form"),M=f("p"),_=f("strong"),F=w("My pseudo : "),P=w(m[2]),N=q(),S=f("form"),k=f("p"),r=f("strong"),g=w("My email : "),C=w(m[3]),D=q(),h=f("form"),o=f("p"),p=f("strong"),x=w("Promo : "),H=w(m[5]),I=q(),T=f("form"),U=f("p"),j=f("strong"),z=w("Status : "),Q=w(m[4]),W=q(),J=f("form"),V=f("a"),X=w("Edit my account"),this.h()},l(e){l=c(e,"FORM",{class:!0});var i=u(l);a=c(i,"P",{});var K=u(a);d=c(K,"STRONG",{});var te=u(d);O=y(te,"My name : "),te.forEach(s),E=y(K,m[0]),v=L(K),A=y(K,m[1]),K.forEach(s),i.forEach(s),G=L(e),R=c(e,"FORM",{class:!0});var re=u(R);M=c(re,"P",{});var Y=u(M);_=c(Y,"STRONG",{});var oe=u(_);F=y(oe,"My pseudo : "),oe.forEach(s),P=y(Y,m[2]),Y.forEach(s),re.forEach(s),N=L(e),S=c(e,"FORM",{class:!0});var le=u(S);k=c(le,"P",{});var Z=u(k);r=c(Z,"STRONG",{});var ae=u(r);g=y(ae,"My email : "),ae.forEach(s),C=y(Z,m[3]),Z.forEach(s),le.forEach(s),D=L(e),h=c(e,"FORM",{class:!0});var fe=u(h);o=c(fe,"P",{});var $=u(o);p=c($,"STRONG",{});var ce=u(p);x=y(ce,"Promo : "),ce.forEach(s),H=y($,m[5]),$.forEach(s),fe.forEach(s),I=L(e),T=c(e,"FORM",{class:!0});var ue=u(T);U=c(ue,"P",{});var ee=u(U);j=c(ee,"STRONG",{});var ne=u(j);z=y(ne,"Status : "),ne.forEach(s),Q=y(ee,m[4]),ee.forEach(s),ue.forEach(s),W=L(e),J=c(e,"FORM",{class:!0});var me=u(J);V=c(me,"A",{class:!0,href:!0});var pe=u(V);X=y(pe,"Edit my account"),pe.forEach(s),me.forEach(s),this.h()},h(){n(l,"class","row flex-left flex"),n(R,"class","row flex-left flex"),n(S,"class","row flex-left flex"),n(h,"class","row flex-left flex"),n(T,"class","row flex-left flex"),n(V,"class","button block primary"),n(V,"href","/protected_routes/account/update"),n(J,"class","row flex-right flex")},m(e,i){b(e,l,i),t(l,a),t(a,d),t(d,O),t(a,E),t(a,v),t(a,A),b(e,G,i),b(e,R,i),t(R,M),t(M,_),t(_,F),t(M,P),b(e,N,i),b(e,S,i),t(S,k),t(k,r),t(r,g),t(k,C),b(e,D,i),b(e,h,i),t(h,o),t(o,p),t(p,x),t(o,H),b(e,I,i),b(e,T,i),t(T,U),t(U,j),t(j,z),t(U,Q),b(e,W,i),b(e,J,i),t(J,V),t(V,X)},p(e,i){i&1&&B(E,e[0]),i&2&&B(A,e[1]),i&4&&B(P,e[2]),i&8&&B(C,e[3]),i&32&&B(H,e[5]),i&16&&B(Q,e[4])},d(e){e&&s(l),e&&s(G),e&&s(R),e&&s(N),e&&s(S),e&&s(D),e&&s(h),e&&s(I),e&&s(T),e&&s(W),e&&s(J)}}}function Re(m){let l,a,d,O,E,v,A,G,R,M,_,F,P,N,S,k,r,g;function C(o,p){return o[0]?Oe:be}let D=C(m),h=D(m);return{c(){l=f("form"),a=f("h1"),d=w("My account"),O=q(),E=f("a"),v=f("img"),R=q(),h.c(),M=q(),_=f("div"),F=f("form"),P=f("a"),N=w("Mes posts"),S=q(),k=f("form"),r=f("a"),g=w("Mes assos"),this.h()},l(o){l=c(o,"FORM",{class:!0});var p=u(l);a=c(p,"H1",{});var x=u(a);d=y(x,"My account"),x.forEach(s),O=L(p),E=c(p,"A",{href:!0,class:!0,style:!0});var H=u(E);v=c(H,"IMG",{src:!0,alt:!0,class:!0}),H.forEach(s),p.forEach(s),R=L(o),h.l(o),M=L(o),_=c(o,"DIV",{class:!0});var I=u(_);F=c(I,"FORM",{class:!0});var T=u(F);P=c(T,"A",{class:!0,href:!0});var U=u(P);N=y(U,"Mes posts"),U.forEach(s),T.forEach(s),S=L(I),k=c(I,"FORM",{class:!0});var j=u(k);r=c(j,"A",{class:!0,href:!0});var z=u(r);g=y(z,"Mes assos"),z.forEach(s),j.forEach(s),I.forEach(s),this.h()},h(){ie(v.src,A=m[6])||n(v,"src",A),n(v,"alt",G=m[6]?"Avatar":"Pas de photo"),n(v,"class","avatar image"),n(E,"href","/protected_routes/account/photo"),n(E,"class","avatarPlaceholder"),Ee(E,"margin-left","auto"),n(l,"class","row flex-center flex"),n(P,"class","button block"),n(P,"href","/protected_routes/account/posts"),n(F,"class","row flex"),n(r,"class","button block"),n(r,"href","/protected_routes/account/assos"),n(k,"class","row flex"),n(_,"class","row flex-center flex footer")},m(o,p){b(o,l,p),t(l,a),t(a,d),t(l,O),t(l,E),t(E,v),b(o,R,p),h.m(o,p),b(o,M,p),b(o,_,p),t(_,F),t(F,P),t(P,N),t(_,S),t(_,k),t(k,r),t(r,g)},p(o,[p]){p&64&&!ie(v.src,A=o[6])&&n(v,"src",A),p&64&&G!==(G=o[6]?"Avatar":"Pas de photo")&&n(v,"alt",G),D===(D=C(o))&&h?h.p(o,p):(h.d(1),h=D(o),h&&(h.c(),h.m(M.parentNode,M)))},i:se,o:se,d(o){o&&s(l),o&&s(R),h.d(o),o&&s(M),o&&s(_)}}}function Pe(m,l,a){let d;Me(m,ye,r=>a(10,d=r));let O=d.data.session.user,E=null,v=null,A=null,G=null,R=null,M=null,_=null,F=null,P=!1,N=!1;we(()=>{S()});const S=async()=>{try{P=!0;let{data:r,error:g}=await _e.from("users").select("first_name, last_name, pseudo, email, status, promo, photo").eq("id",O.id).single();if(r&&(a(0,E=r.first_name),a(1,v=r.last_name),a(2,A=r.pseudo),a(3,G=r.email),a(4,R=r.status),a(5,M=r.promo),_=r.photo),g)throw g}catch(r){r instanceof Error&&alert(r.message)}finally{P=!1,k()}},k=async()=>{if(_)try{N=!0;const{data:r,error:g}=await _e.storage.from("avatars").download(`${O.id}/${_}`);if(r&&a(6,F=URL.createObjectURL(r)),g)throw g}catch(r){r instanceof Error&&alert(r.message)}finally{N=!1}};return[E,v,A,G,R,M,F]}class ge extends he{constructor(l){super(),de(this,l,Pe,Re,ve,{})}}export{ge as default};
